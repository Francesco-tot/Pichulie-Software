<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="UserSchema"><span class="type-signature">(constant) </span>UserSchema<span class="type-signature"> :mongoose.Schema.&lt;UserDocument></span></h4>




<div class="description">
    <p>Mongoose schema for User model</p>
<p>Defines the structure and validations for user documents in MongoDB.
Includes fields for authentication, personal information, and password reset management.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">mongoose.Schema.&lt;UserDocument></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_models_models.js.html">apps/user/models/models.js</a>, <a href="apps_user_models_models.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://mongoosejs.com/docs/guide.html">Mongoose Schema Guide</a></li>
        </ul>
    </dd>
    

    
</dl>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Create a new userconst newUser = new User({  email: 'user@example.com',  password: 'hashedPassword123',  name: 'John Doe',  age: 25});</code></pre>



        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="authenticateToken"><span class="type-signature">(async) </span>authenticateToken<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Middleware Authentication JWT
Verifies if the user has a valid token before accessing protected routes</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="middlewares_auth.js.html">middlewares/auth.js</a>, <a href="middlewares_auth.js.html#line8">line 8</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="createEmailTransporter"><span class="type-signature"></span>createEmailTransporter<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Email transporter factory function</p>
<p>Creates and configures a Nodemailer transporter instance for sending emails
through Gmail's SMTP service. Uses environment variables for authentication
credentials to maintain security and configurability across different environments.</p>
<p>Configuration details:</p>
<ul>
<li><strong>Service</strong>: Uses Gmail's SMTP service for reliable email delivery</li>
<li><strong>Authentication</strong>: Retrieves credentials from environment variables</li>
<li><strong>Security</strong>: Credentials are never hardcoded in the application</li>
<li><strong>Reusability</strong>: Returns a configured transporter ready for immediate use</li>
</ul>
<p>Security:</p>
<ul>
<li>Uses environment variables to protect email credentials</li>
<li>Requires Gmail app-specific password (more secure than regular password)</li>
<li>No sensitive information hardcoded in the application</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line205">line 205</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://nodemailer.com/">https://nodemailer.com/</a> Nodemailer Documentation</li>
        
            <li><a href="https://support.google.com/accounts/answer/185833">https://support.google.com/accounts/answer/185833</a> Gmail App Passwords</li>
        
            <li><a href="https://nodemailer.com/smtp/gmail/">https://nodemailer.com/smtp/gmail/</a> Nodemailer Gmail Configuration</li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getUserTasks"><span class="type-signature">(async) </span>getUserTasks<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>GET /tasks
Get all tasks of the authenticated user</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_task_controllers_controllers.js.html">apps/task/controllers/controllers.js</a>, <a href="apps_task_controllers_controllers.js.html#line25">line 25</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleServerError"><span class="type-signature"></span>handleServerError<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Helper function for consistent error handling in development mode</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_task_controllers_controllers.js.html">apps/task/controllers/controllers.js</a>, <a href="apps_task_controllers_controllers.js.html#line6">line 6</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="handleServerError"><span class="type-signature"></span>handleServerError<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Server error handler utility function</p>
<p>Centralized error handling function that manages server errors with
environment-aware logging and consistent client responses. Provides
detailed error information in development while maintaining security
in production by hiding sensitive error details.</p>
<p>Error handling behavior:</p>
<ul>
<li><strong>Development mode</strong>: Logs full error details including stack trace to console</li>
<li><strong>Production mode</strong>: Logs only generic error occurrence without sensitive details</li>
<li><strong>Client response</strong>: Always returns generic message to prevent information leakage</li>
<li><strong>Error details</strong>: Included in response only in development environment</li>
</ul>
<p>Security:</p>
<ul>
<li>Prevents sensitive error information from being exposed to clients in production</li>
<li>Logs detailed errors only in development for debugging purposes</li>
<li>Maintains consistent error response structure across all endpoints</li>
</ul>
<p>Performance:</p>
<ul>
<li>Minimal overhead as it only performs console logging and JSON response</li>
<li>Conditional logging based on environment reduces production log noise</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://expressjs.com/en/guide/error-handling.html">https://expressjs.com/en/guide/error-handling.html</a> Express Error Handling</li>
        
            <li><a href="https://nodejs.org/api/errors.html">https://nodejs.org/api/errors.html</a> Node.js Error Documentation</li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="login"><span class="type-signature">(async) </span>login<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>User login controller</p>
<p>Authenticates a user by validating email and password credentials.
Generates a JWT token for successful authentication and handles various
authentication failure scenarios including invalid credentials and blocked accounts.</p>
<p>Authentication flow:</p>
<ol>
<li>Extracts email and password from request body</li>
<li>Searches for user by email in database</li>
<li>Validates password using bcrypt comparison</li>
<li>Checks if user account is blocked</li>
<li>Generates JWT token with user ID and email</li>
<li>Returns success response with token and user data (excluding password)</li>
</ol>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line144">line 144</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://jwt.io/">https://jwt.io/</a> JWT token specification</li>
        
            <li><a href="https://www.npmjs.com/package/bcrypt">https://www.npmjs.com/package/bcrypt</a> bcrypt documentation</li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="register"><span class="type-signature">(async) </span>register<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>User registration controller</p>
<p>Handles new user account creation with comprehensive validation and security measures.
Validates all required fields, enforces password requirements, prevents duplicate accounts,
and securely stores user data with bcrypt password hashing.</p>
<p>Registration validation flow:</p>
<ol>
<li>Extracts all required fields from request body</li>
<li>Validates that all fields are provided (email, password, passwordCheck, name, age)</li>
<li>Enforces minimum password length (6 characters)</li>
<li>Verifies password and passwordCheck match exactly</li>
<li>Checks email uniqueness against existing users</li>
<li>Hashes password securely using bcrypt with 10 salt rounds</li>
<li>Creates new user document with hashed password</li>
<li>Saves user to database and returns success response with user ID</li>
</ol>
<p><strong>Security Features:</strong></p>
<ul>
<li>Password confirmation validation prevents typos</li>
<li>Minimum password length enforcement (6 characters)</li>
<li>Secure bcrypt hashing with 10 salt rounds</li>
<li>Email uniqueness validation to prevent duplicates</li>
<li>No plaintext password storage</li>
<li>Structured error responses with appropriate HTTP status codes</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line80">line 80</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/bcrypt">https://www.npmjs.com/package/bcrypt</a> bcrypt Documentation</li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="requestPasswordReset"><span class="type-signature">(async) </span>requestPasswordReset<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Password reset request controller</p>
<p>Handles password reset requests by generating secure tokens, storing them with expiration,
and sending reset emails to users. Implements security measures to prevent email enumeration
attacks by returning consistent responses regardless of whether the email exists.</p>
<ul>
<li>Password reset flow:</li>
</ul>
<ol>
<li>Validates that email is provided in request body</li>
<li>Searches for user by email in database</li>
<li>Generates cryptographically secure reset token (32 bytes)</li>
<li>Stores token and expiration time (1 hour) in user record</li>
<li>Creates reset URL with frontend domain and token</li>
<li>Sends HTML email with reset link to user</li>
<li>Returns success response</li>
</ol>
<p><strong>Security Features:</strong></p>
<ul>
<li>Uses status 202 for non-existent emails to prevent enumeration</li>
<li>Generates cryptographically secure tokens using crypto.randomBytes</li>
<li>Sets 1-hour expiration on reset tokens</li>
<li>Returns consistent responses regardless of email existence</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line247">line 247</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://nodejs.org/api/crypto.html#cryptorandombytessize-callback">https://nodejs.org/api/crypto.html#cryptorandombytessize-callback</a> Node.js crypto.randomBytes</li>
        
            <li><a href="https://nodemailer.com/">https://nodemailer.com/</a> Nodemailer Documentation</li>
        </ul>
    </dd>
    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>- Consider hashing tokens before storing in database- Implement rate limiting for reset requests per email- Add email template system for better maintainability- Log security events for monitoring</li>
        </ul>
    </dd>
    
</dl>




















        
            

    

    
    <h4 class="name" id="resendResetToken"><span class="type-signature">(async) </span>resendResetToken<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Resend password reset token controller</p>
<p>Handles requests to resend password reset tokens when the original token
has expired, been used, or was not received. Generates a new secure token,
invalidates any previous tokens, and sends a new reset email. Implements
security measures to prevent email enumeration attacks.</p>
<p>Token resend flow:</p>
<ol>
<li>Validates that email is provided in request body</li>
<li>Searches for user by email in database</li>
<li>Generates new cryptographically secure reset token (32 bytes)</li>
<li>Updates user record with new token and fresh expiration (1 hour)</li>
<li>Resets the token usage flag to allow new reset attempts</li>
<li>Creates new reset URL with frontend domain and new token</li>
<li>Sends HTML email with new reset link to user</li>
<li>Handles email sending errors gracefully (continues operation)</li>
<li>Returns success response (token saved regardless of email status)</li>
</ol>
<p><strong>Security Features:</strong></p>
<ul>
<li>Returns status 202 for non-existent emails to prevent enumeration</li>
<li>Generates cryptographically secure tokens using crypto.randomBytes</li>
<li>Invalidates previous tokens by generating new ones</li>
<li>Consistent responses regardless of email existence</li>
<li>Graceful email failure handling (doesn't expose errors to client)</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line542">line 542</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://nodejs.org/api/crypto.html#cryptorandombytessize-callback">https://nodejs.org/api/crypto.html#cryptorandombytessize-callback</a> Node.js crypto.randomBytes</li>
        
            <li><a href="https://nodemailer.com/">https://nodemailer.com/</a> Nodemailer Documentation</li>
        </ul>
    </dd>
    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>- Implement rate limiting for resend requests per email- Add cooldown period between resend attempts- Consider email delivery status tracking- Add metrics for resend success/failure rates- Implement email template system for easier maintenance- Add audit logging for security monitoring</li>
        </ul>
    </dd>
    
</dl>




















        
            

    

    
    <h4 class="name" id="resetPassword"><span class="type-signature">(async) </span>resetPassword<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Password reset confirmation controller</p>
<p>Handles password reset confirmation using a valid reset token. Validates the token,
checks expiration and usage status, then updates the user's password with proper
security measures including bcrypt hashing and token invalidation.</p>
<p>Password reset confirmation flow:</p>
<ol>
<li>Validates required fields (token and newPassword)</li>
<li>Enforces minimum password length (6 characters)</li>
<li>Searches for user by reset token</li>
<li>Verifies token hasn't been used previously</li>
<li>Checks token hasn't expired (within 1 hour)</li>
<li>Hashes new password with bcrypt (10 salt rounds)</li>
<li>Updates user password and invalidates reset token</li>
<li>Marks token as used to prevent reuse</li>
<li>Returns success response with redirect information</li>
</ol>
<p><strong>Security Features:</strong></p>
<ul>
<li>Token validation with multiple security checks</li>
<li>Password strength enforcement (minimum 6 characters)</li>
<li>One-time token usage prevention</li>
<li>Secure password hashing with bcrypt</li>
<li>Complete token cleanup after use</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line336">line 336</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/bcrypt">https://www.npmjs.com/package/bcrypt</a> bcrypt Documentation</li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="validateResetToken"><span class="type-signature">(async) </span>validateResetToken<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Password reset token validation controller</p>
<p>Validates password reset tokens without performing the actual password reset.
This endpoint is typically called before displaying the password reset form
to ensure the token is valid, not expired, and not already used. Provides
detailed validation responses with error types and user guidance.</p>
<p>Token validation flow:</p>
<ol>
<li>Extracts token from URL parameters</li>
<li>Validates token parameter is provided</li>
<li>Searches for user by reset token in database</li>
<li>Checks if token has been used previously</li>
<li>Verifies token hasn't expired (within 1 hour)</li>
<li>Returns validation result with appropriate error types</li>
<li>Provides user email and expiration info for valid tokens</li>
</ol>
<p><strong>Validation States:</strong></p>
<ul>
<li><strong>Valid</strong>: Token exists, unused, and not expired</li>
<li><strong>Missing</strong>: No token provided in request</li>
<li><strong>Invalid</strong>: Token not found in database</li>
<li><strong>Used</strong>: Token already consumed for password reset</li>
<li><strong>Expired</strong>: Token past expiration time (1 hour)</li>
<li><strong>Server Error</strong>: Database or system error</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="apps_user_controllers_controllers.js.html">apps/user/controllers/controllers.js</a>, <a href="apps_user_controllers_controllers.js.html#line431">line 431</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>- Consider standardizing error message language- Add rate limiting for validation attempts- Log suspicious validation patterns- Consider adding CSRF protection for sensitive operations- Add metrics for token validation success rates</li>
        </ul>
    </dd>
    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#UserSchema">UserSchema</a></li><li><a href="global.html#authenticateToken">authenticateToken</a></li><li><a href="global.html#createEmailTransporter">createEmailTransporter</a></li><li><a href="global.html#getUserTasks">getUserTasks</a></li><li><a href="global.html#handleServerError">handleServerError</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#requestPasswordReset">requestPasswordReset</a></li><li><a href="global.html#resendResetToken">resendResetToken</a></li><li><a href="global.html#resetPassword">resetPassword</a></li><li><a href="global.html#validateResetToken">validateResetToken</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Tue Sep 09 2025 01:32:29 GMT-0500 (hora estándar de Colombia)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>